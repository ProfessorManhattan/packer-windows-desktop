#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

. "./.modules/shared/update.lib.sh"

log "Running lint-staged"
npx lint-staged
log "Running npm test"
npm test
log "Checking for spelling errors"
FILES=$(git diff --cached --name-only)
if [ "$FILES" ]; then
  npx cspell --no-summary --no-progress --show-context --no-must-find-files --config ./.modules/shared/.cspell.json $FILES || true
  warn "A spell check was performed - if there are any spelling errors reported above then please fix them prior to committing the code."
else
  info "No files staged for spell checking"
fi
success "Successfully passed all validation checks"
